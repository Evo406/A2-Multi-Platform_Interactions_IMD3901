<!DOCTYPE html>
<html>
    <head>
      <title>Hello, WebXR! - A-Frame</title>
      <meta name="description" content="Hello, WebVR! - A-Frame">
      <!--  note we are using 1.5.0 as most recent -->
      <!-- <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script> -->
      <!-- <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script> -->
      <!-- This loads the local files (helps reduce web load) -->
      <script src="js/aframe.min.js"></script>
      <script src="js/aframe-environment-component.min.js"></script>
      <script src="js/spinning-effect.js"></script>
    </head>
    <body>
      <!-- all aframe items must be in a-scene--> 
      <a-scene>
        <!-- A-Frame uses an asset system to try and cache assets so we don
        t have to download-->
        <a-assets timeout="10000">
            <!-- this is a spherical earth tecture-->
            <img id="earth_map" src="assets/2k_earth_daymap.jpg" crossorigin="anonymous">

            <audio id="space_music" src="assets/SpaceMusic.mp3" preload="auto" crossorigin="anonymous"></audio>

            <!-- image textures (for plaques)-->
            <img id="earth_img" src="assets/Earth.jpg" crossorigin="anonymous">
            <img id="mars_img" src="assets/MarsSurface.jpg" crossorigin="anonymous">

            <!--gltf is a web optimized 3D format. GLB is a binary form (single file) and GLTF is a folder of connected files (eg. textures and vertex data
                Response-type needs to be arraybuffer to property read the /glb format (it is JSON by default)
            -->
            <a-asset-item id="mars_model" src="assets/mars.glb" response-type="arraybuffer"></a-asset-item>
        </a-assets>
        <a-entity sound="src:#space_music; autoplay:true;"></a-entity>

        <a-entity position="0 1.8 0" camera wasd-controls look-controls>
            <!-- Cursor creates a raycast interaction system where we cast a ray into the scene and check for intersections with faces of certain objects (of class type interactive)  -->
            <!-- - far: ignore all objects farther from cursor than here
                 - interval: after ho wmany milliseconds do we check for interactions
                 - objects: what css selector do we use for which objects we check -->
            <a-entity cursor="rayOrigin:mouse;" raycaster="far:20; interval:100; objects:.interactive;"></a-entity>
            <a-entity position="0.5 -0.5 0" light="type: spot; intensity:1.4; angle:40; penumbra:0.3; castShadow:true; shadowBias:-0.0005"></a-entity>
        </a-entity>


        <!-- Lighting -->
        <!-- Penumbra is like feather -->
         
        <!-- Earth Exhibit and Plaque-->
        <a-entity id="earth"
                position="0 3 -6"
                rotation="0 0 0"
                scale="1 1 1"
                geometry="primitive:sphere; radius:2.0;"
                material="src:#earth_map;"
                shadow="cast:true; receive:true;">
                
        </a-entity>

        <!-- Create parent object to hold image / text(grouped in an entity group) -->
        <a-entity id="earth_plane" position="0 0.5 -4" rotation="-30 0 0;" scale="1 1 1">
            <a-entity position="0.65 0 0.01"
                geometry="primitive:plane; width:1.5; height:1.0;"
                material="src:#earth_img;" shadow="cast:false; receive:true;">
            </a-entity>

            <a-entity position="0 0 -0.11"
                geometry="primitive:box; width:3.0; height:1.2; depth: 0.2;"
                material="color:white;"
                shadow="cast:true; receive:true;"></a-entity>
            <!-- Text size is dependent on wrapCount -->
            <a-entity position="-1.4 0.5 0.01" text="value:Earth;
                      color:black; font:roboto; width:1.3; anchor:left; baseline:top; wrapCount:12;"></a-entity>
            <a-entity position="-1.4 0.25 0.01" text="value:Earth is the third planet from the sun. It is also the only astronomical object in the universe known to harbour life.;
                      color:black; font:roboto; width:1.25; anchor:left; baseline:top; wrapCount:18;"></a-entity>
        </a-entity>
        

        <!-- Mars Exhibit and Plaque -->
        <!-- Artefact -->
        <a-entity id="mars" position="6 3.5 0"  rotation="0 -90 0" scale="0.002 0.002 0.002"               
                gltf-model="#mars_model"
                shadow="cast:true; receive:true;"></a-entity>
        <!-- Information plaque -->
        <a-entity id="mars_plane" position="4 0.5 -0" rotation="-30 -90 0;">
            <a-entity position="0.65 0 0.01"
                      geometry="primitive:plane; width:1.5; height:1.0;"
                      material="src:#mars_img;"
                      shadow="cast:false; receive:true;"></a-entity>
            <a-entity position="0 0 -0.11"
                      geometry="primitive:box; width:3.0; height:1.2; depth: 0.2;"
                      material="color:white;" shadow="cast:true; receive:true;"></a-entity>
            <a-entity position="-1.4 0.5 0.01" text="value:Mars;
                      color:black; font:roboto; width:1.3; anchor:left; baseline:top; wrapCount:12;"></a-entity>
            <a-entity position="-1.4 0.25 0.01" text="value:Mars is the fourth planet from the sun. On its surface you will find marcus' home.;
                      color:black; font:roboto; width:1.25; anchor:left; baseline:top; wrapCount:18;"></a-entity>
        </a-entity>
        
        <!-- Universal Button  w/animations -->
        <!-- if you want multiple of the same component/attribute, the browser will ignore; but ... 
        A-Frame lets us do it if we add an __ attached to the component name with a unique id after, eg. animation__uniqueID -->
        <a-entity id="universal_button">
            <a-entity class="button interactive" position="0 0.6 0"
                      geometry="primitive:cylinder; radius:0.15; height:0.2"
                      material="color:rgb(255,100,100);" 
                      animation__mouseenter="property:material.color; type:color; to:rgb(255,0,0); startEvents:mouseenter; dur:200;"
                      animation__mouseleave="property:material.color; type:color; to:rgb(255,100,100); startEvents:mouseleave; dur:200;"
                      animation__click="property:position.y; from:0.55; to:0.6; startEvents:click; dur:200;"
                      spinning-effect="duration:18000;">


            </a-entity>
            <a-entity position="0 0.3 0" geometry="primative:box; width:0.5; depth:0.5; height:0.5;"
                      material="color:white"></a-entitiy>
        </a-entity>

        <!-- Add a room -->
        <a-entity id="room" shadow="cast:false; receive:true;">
            <a-entity class="ground" position="0 0.01 0" rotation="-90 0 0" geometry="primitive:plane; width:14; height:14;" material="color:white;"></a-entity>
            <a-entity id="walls">
                <a-entity class="wall"   position="15 8 0"   rotation="0 -90 0" geometry="primitive:plane; width:30; height:3;" material="color:white;"></a-entity>
                <a-entity class="wall"   position="-15 8 0"  rotation="0 90 0" geometry="primitive:plane; width:30; height:3;" material="color:white;"></a-entity>
                <a-entity class="wall"   position="0 8 15"   rotation="0 180 0" geometry="primitive:plane; width:30; height:3;" material="color:white;"></a-entity>
                <a-entity class="wall"   position="0 8 -15"  rotation="0 0 0" geometry="primitive:plane; width:30; height:3;" material="color:white;"></a-entity>
            </a-entity>
            
        </a-entity>

        <!--External A-Frame environment. Can be found here: https://github.com/supermedium/aframe-environment-component -->
        <a-entity environment="preset:starry"
                  lighting="distant">
        </a-entity>
      </a-scene>
    </body>
</html>